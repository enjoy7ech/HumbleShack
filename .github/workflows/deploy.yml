name: deploy this blog
run-name: ${{ github.actor }} is deploying 🚀
on:
  push:
    tags:
      - v* # push tag触发workflow
jobs:
  pull-latest:
    runs-on: self-hosted
    steps:
      - name: Check out repository code # 我的项目已经在runner上提前clone好了
        run: cd /root/github/HumbleShack && git pull
        shell: bash
  deploy:
    runs-on: self-hosted
    steps:
      - name: Install dependencies # 安装依赖
        run: yarn
        shell: bash
      - name: rebuild all static resource # 重新build静态资源，供nginx使用
        run: npx hexo clean && yarn build
        shell: bash
